---
title: CSL NEXT template schema
description: a YAML/JSON representation of a new CSL style template language.
"$schema": http://json-schema.org/draft-07/schema#
"$id": https://resource.citationstyles.org/schema/csl/style/template
type: object
definitions:
  item:
    description: Instructions for formatting item metadata.
    type: object
  list:
    description: Instructions for sequencing and formatting a list of reference items.
    type: array
  cond:
    description: Conditional formatting.
    type: array
    items:
      anyOf:
      # TODO tighten
        - "$ref": "#/definitions/when"
        - "$ref": "#/definitions/else"
  when:
    children:
      items:
        "$ref": "#/definitions/template.model"
  else:
    children:
      items:
        "$ref": "#/definitions/template.model"
  cs-token:
    # must be a token
    description: Controlled lists of tokens, that correspond to different functions.
    # a pattern here would require a pseudo-namespace as below, but allow custom ones
    type: string
    enum:
      - cs-author
      - cs-author-year
  cs-token.transforms:
    type: string
    enum:
      - cs-title.main
      - cs-title.sub
      - cs-date.year
      - cs-contributors.etal
      - cs-locators.range
  group-by:
    description: Grouping instructions for a list.
    "$ref": "#/definitions/cs-token"
  sort:
    description: Sorting instructions for a list.
    "$ref": "#/definitions/cs-token"
  transforms:
    description: Functions to transform item input data.
    type: array
    items:
      "$ref": "#/definitions/cs-token.transforms"
  template.model:
    anyOf:
      - "$ref": "#/definitions/item"
      - "$ref": "#/definitions/list"
      - "$ref": "#/definitions/cond"
properties:
  name:
    # token
    type: string
  children:
    items:
      "$ref": "#/definitions/template.model"
    type: array
